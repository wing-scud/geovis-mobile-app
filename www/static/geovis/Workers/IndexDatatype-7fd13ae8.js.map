{"version":3,"file":"IndexDatatype-7fd13ae8.js","sources":["../../../../Source/Core/IndexDatatype.js"],"sourcesContent":["import defined from './defined.js';\r\nimport DeveloperError from './DeveloperError.js';\r\nimport CesiumMath from './Math.js';\r\nimport WebGLConstants from './WebGLConstants.js';\r\n\r\n    /**\r\n     * Constants for WebGL index datatypes.  These corresponds to the\r\n     * <code>type</code> parameter of {@link http://www.khronos.org/opengles/sdk/docs/man/xhtml/glDrawElements.xml|drawElements}.\r\n     *\r\n     * @exports IndexDatatype\r\n     */\r\n    var IndexDatatype = {\r\n        /**\r\n         * 8-bit unsigned byte corresponding to <code>UNSIGNED_BYTE</code> and the type\r\n         * of an element in <code>Uint8Array</code>.\r\n         *\r\n         * @type {Number}\r\n         * @constant\r\n         */\r\n        UNSIGNED_BYTE : WebGLConstants.UNSIGNED_BYTE,\r\n\r\n        /**\r\n         * 16-bit unsigned short corresponding to <code>UNSIGNED_SHORT</code> and the type\r\n         * of an element in <code>Uint16Array</code>.\r\n         *\r\n         * @type {Number}\r\n         * @constant\r\n         */\r\n        UNSIGNED_SHORT : WebGLConstants.UNSIGNED_SHORT,\r\n\r\n        /**\r\n         * 32-bit unsigned int corresponding to <code>UNSIGNED_INT</code> and the type\r\n         * of an element in <code>Uint32Array</code>.\r\n         *\r\n         * @type {Number}\r\n         * @constant\r\n         */\r\n        UNSIGNED_INT : WebGLConstants.UNSIGNED_INT\r\n    };\r\n\r\n    /**\r\n     * Returns the size, in bytes, of the corresponding datatype.\r\n     *\r\n     * @param {IndexDatatype} indexDatatype The index datatype to get the size of.\r\n     * @returns {Number} The size in bytes.\r\n     *\r\n     * @example\r\n     * // Returns 2\r\n     * var size = Cesium.IndexDatatype.getSizeInBytes(Cesium.IndexDatatype.UNSIGNED_SHORT);\r\n     */\r\n    IndexDatatype.getSizeInBytes = function(indexDatatype) {\r\n        switch(indexDatatype) {\r\n            case IndexDatatype.UNSIGNED_BYTE:\r\n                return Uint8Array.BYTES_PER_ELEMENT;\r\n            case IndexDatatype.UNSIGNED_SHORT:\r\n                return Uint16Array.BYTES_PER_ELEMENT;\r\n            case IndexDatatype.UNSIGNED_INT:\r\n                return Uint32Array.BYTES_PER_ELEMENT;\r\n        }\r\n\r\n        //>>includeStart('debug', pragmas.debug);\r\n        throw new DeveloperError('indexDatatype is required and must be a valid IndexDatatype constant.');\r\n        //>>includeEnd('debug');\r\n    };\r\n\r\n    /**\r\n     * Gets the datatype with a given size in bytes.\r\n     *\r\n     * @param {Number} sizeInBytes The size of a single index in bytes.\r\n     * @returns {IndexDatatype} The index datatype with the given size.\r\n     */\r\n    IndexDatatype.fromSizeInBytes = function(sizeInBytes) {\r\n        switch (sizeInBytes) {\r\n            case 2:\r\n                return IndexDatatype.UNSIGNED_SHORT;\r\n            case 4:\r\n                return IndexDatatype.UNSIGNED_INT;\r\n            case 1:\r\n                return IndexDatatype.UNSIGNED_BYTE;\r\n            //>>includeStart('debug', pragmas.debug);\r\n            default:\r\n                throw new DeveloperError('Size in bytes cannot be mapped to an IndexDatatype');\r\n            //>>includeEnd('debug');\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Validates that the provided index datatype is a valid {@link IndexDatatype}.\r\n     *\r\n     * @param {IndexDatatype} indexDatatype The index datatype to validate.\r\n     * @returns {Boolean} <code>true</code> if the provided index datatype is a valid value; otherwise, <code>false</code>.\r\n     *\r\n     * @example\r\n     * if (!Cesium.IndexDatatype.validate(indexDatatype)) {\r\n     *   throw new Cesium.DeveloperError('indexDatatype must be a valid value.');\r\n     * }\r\n     */\r\n    IndexDatatype.validate = function(indexDatatype) {\r\n        return defined(indexDatatype) &&\r\n               (indexDatatype === IndexDatatype.UNSIGNED_BYTE ||\r\n                indexDatatype === IndexDatatype.UNSIGNED_SHORT ||\r\n                indexDatatype === IndexDatatype.UNSIGNED_INT);\r\n    };\r\n\r\n    /**\r\n     * Creates a typed array that will store indices, using either <code><Uint16Array</code>\r\n     * or <code>Uint32Array</code> depending on the number of vertices.\r\n     *\r\n     * @param {Number} numberOfVertices Number of vertices that the indices will reference.\r\n     * @param {Number|Array} indicesLengthOrArray Passed through to the typed array constructor.\r\n     * @returns {Uint16Array|Uint32Array} A <code>Uint16Array</code> or <code>Uint32Array</code> constructed with <code>indicesLengthOrArray</code>.\r\n     *\r\n     * @example\r\n     * this.indices = Cesium.IndexDatatype.createTypedArray(positions.length / 3, numberOfIndices);\r\n     */\r\n    IndexDatatype.createTypedArray = function(numberOfVertices, indicesLengthOrArray) {\r\n        //>>includeStart('debug', pragmas.debug);\r\n        if (!defined(numberOfVertices)) {\r\n            throw new DeveloperError('numberOfVertices is required.');\r\n        }\r\n        //>>includeEnd('debug');\r\n\r\n        if (numberOfVertices >= CesiumMath.SIXTY_FOUR_KILOBYTES) {\r\n            return new Uint32Array(indicesLengthOrArray);\r\n        }\r\n\r\n        return new Uint16Array(indicesLengthOrArray);\r\n    };\r\n\r\n    /**\r\n     * Creates a typed array from a source array buffer.  The resulting typed array will store indices, using either <code><Uint16Array</code>\r\n     * or <code>Uint32Array</code> depending on the number of vertices.\r\n     *\r\n     * @param {Number} numberOfVertices Number of vertices that the indices will reference.\r\n     * @param {ArrayBuffer} sourceArray Passed through to the typed array constructor.\r\n     * @param {Number} byteOffset Passed through to the typed array constructor.\r\n     * @param {Number} length Passed through to the typed array constructor.\r\n     * @returns {Uint16Array|Uint32Array} A <code>Uint16Array</code> or <code>Uint32Array</code> constructed with <code>sourceArray</code>, <code>byteOffset</code>, and <code>length</code>.\r\n     *\r\n     */\r\n    IndexDatatype.createTypedArrayFromArrayBuffer = function(numberOfVertices, sourceArray, byteOffset, length) {\r\n        //>>includeStart('debug', pragmas.debug);\r\n        if (!defined(numberOfVertices)) {\r\n            throw new DeveloperError('numberOfVertices is required.');\r\n        }\r\n        if (!defined(sourceArray)) {\r\n            throw new DeveloperError('sourceArray is required.');\r\n        }\r\n        if (!defined(byteOffset)) {\r\n            throw new DeveloperError('byteOffset is required.');\r\n        }\r\n        //>>includeEnd('debug');\r\n\r\n        if (numberOfVertices >= CesiumMath.SIXTY_FOUR_KILOBYTES) {\r\n            return new Uint32Array(sourceArray, byteOffset, length);\r\n        }\r\n\r\n        return new Uint16Array(sourceArray, byteOffset, length);\r\n    };\r\nexport default Object.freeze(IndexDatatype);\r\n"],"names":["WebGLConstants","DeveloperError","defined","CesiumMath"],"mappings":"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"}