{"version":3,"file":"createVectorTileGeometries.js","sources":["../../../../Source/Scene/Vector3DTileBatch.js","../../../../Source/WorkersES6/createVectorTileGeometries.js"],"sourcesContent":["\r\n    /**\r\n     * Describes a renderable batch of geometry.\r\n     *\r\n     * @alias Vector3DTileBatch\r\n     * @constructor\r\n     *\r\n     * @param {Object} options An object with the following properties:\r\n     * @param {Number} options.offset The offset of the batch into the indices buffer.\r\n     * @param {Number} options.count The number of indices in the batch.\r\n     * @param {Color} options.color The color of the geometry in the batch.\r\n     * @param {Number[]} options.batchIds An array where each element is the batch id of the geometry in the batch.\r\n     *\r\n     * @private\r\n     */\r\n    function Vector3DTileBatch(options) {\r\n        /**\r\n         * The offset of the batch into the indices buffer.\r\n         * @type {Number}\r\n         */\r\n        this.offset = options.offset;\r\n        /**\r\n         * The number of indices in the batch.\r\n         * @type {Number}\r\n         */\r\n        this.count = options.count;\r\n        /**\r\n         * The color of the geometry in the batch.\r\n         * @type {Color}\r\n         */\r\n        this.color = options.color;\r\n        /**\r\n         * An array where each element is the batch id of the geometry in the batch.\r\n         * @type {Number[]}\r\n         */\r\n        this.batchIds = options.batchIds;\r\n    }\r\nexport default Vector3DTileBatch;\r\n","import BoundingSphere from '../Core/BoundingSphere.js';\r\nimport BoxGeometry from '../Core/BoxGeometry.js';\r\nimport Cartesian3 from '../Core/Cartesian3.js';\r\nimport Color from '../Core/Color.js';\r\nimport CylinderGeometry from '../Core/CylinderGeometry.js';\r\nimport defined from '../Core/defined.js';\r\nimport EllipsoidGeometry from '../Core/EllipsoidGeometry.js';\r\nimport IndexDatatype from '../Core/IndexDatatype.js';\r\nimport Matrix4 from '../Core/Matrix4.js';\r\nimport Vector3DTileBatch from '../Scene/Vector3DTileBatch.js';\r\nimport createTaskProcessorWorker from './createTaskProcessorWorker.js';\r\n\r\n    var scratchCartesian = new Cartesian3();\r\n\r\n    var packedBoxLength = Matrix4.packedLength + Cartesian3.packedLength;\r\n    var packedCylinderLength = Matrix4.packedLength + 2;\r\n    var packedEllipsoidLength = Matrix4.packedLength + Cartesian3.packedLength;\r\n    var packedSphereLength = Cartesian3.packedLength + 1;\r\n\r\n    var scratchModelMatrixAndBV = {\r\n        modelMatrix : new Matrix4(),\r\n        boundingVolume : new BoundingSphere()\r\n    };\r\n\r\n    function boxModelMatrixAndBoundingVolume(boxes, index) {\r\n        var boxIndex  = index * packedBoxLength;\r\n\r\n        var dimensions = Cartesian3.unpack(boxes, boxIndex, scratchCartesian);\r\n        boxIndex += Cartesian3.packedLength;\r\n\r\n        var boxModelMatrix = Matrix4.unpack(boxes, boxIndex, scratchModelMatrixAndBV.modelMatrix);\r\n        Matrix4.multiplyByScale(boxModelMatrix, dimensions, boxModelMatrix);\r\n\r\n        var boundingVolume = scratchModelMatrixAndBV.boundingVolume;\r\n        Cartesian3.clone(Cartesian3.ZERO, boundingVolume.center);\r\n        boundingVolume.radius = Math.sqrt(3.0);\r\n\r\n        return scratchModelMatrixAndBV;\r\n    }\r\n\r\n    function cylinderModelMatrixAndBoundingVolume(cylinders, index) {\r\n        var cylinderIndex = index * packedCylinderLength;\r\n\r\n        var cylinderRadius = cylinders[cylinderIndex++];\r\n        var length = cylinders[cylinderIndex++];\r\n        var scale = Cartesian3.fromElements(cylinderRadius, cylinderRadius, length, scratchCartesian);\r\n\r\n        var cylinderModelMatrix = Matrix4.unpack(cylinders, cylinderIndex, scratchModelMatrixAndBV.modelMatrix);\r\n        Matrix4.multiplyByScale(cylinderModelMatrix, scale, cylinderModelMatrix);\r\n\r\n        var boundingVolume = scratchModelMatrixAndBV.boundingVolume;\r\n        Cartesian3.clone(Cartesian3.ZERO, boundingVolume.center);\r\n        boundingVolume.radius = Math.sqrt(2.0);\r\n\r\n        return scratchModelMatrixAndBV;\r\n    }\r\n\r\n    function ellipsoidModelMatrixAndBoundingVolume(ellipsoids, index) {\r\n        var ellipsoidIndex = index * packedEllipsoidLength;\r\n\r\n        var radii = Cartesian3.unpack(ellipsoids, ellipsoidIndex, scratchCartesian);\r\n        ellipsoidIndex += Cartesian3.packedLength;\r\n\r\n        var ellipsoidModelMatrix = Matrix4.unpack(ellipsoids, ellipsoidIndex, scratchModelMatrixAndBV.modelMatrix);\r\n        Matrix4.multiplyByScale(ellipsoidModelMatrix, radii, ellipsoidModelMatrix);\r\n\r\n        var boundingVolume = scratchModelMatrixAndBV.boundingVolume;\r\n        Cartesian3.clone(Cartesian3.ZERO, boundingVolume.center);\r\n        boundingVolume.radius = 1.0;\r\n\r\n        return scratchModelMatrixAndBV;\r\n    }\r\n\r\n    function sphereModelMatrixAndBoundingVolume(spheres, index) {\r\n        var sphereIndex = index * packedSphereLength;\r\n\r\n        var sphereRadius = spheres[sphereIndex++];\r\n\r\n        var sphereTranslation = Cartesian3.unpack(spheres, sphereIndex, scratchCartesian);\r\n        var sphereModelMatrix = Matrix4.fromTranslation(sphereTranslation, scratchModelMatrixAndBV.modelMatrix);\r\n        Matrix4.multiplyByUniformScale(sphereModelMatrix, sphereRadius, sphereModelMatrix);\r\n\r\n        var boundingVolume = scratchModelMatrixAndBV.boundingVolume;\r\n        Cartesian3.clone(Cartesian3.ZERO, boundingVolume.center);\r\n        boundingVolume.radius = 1.0;\r\n\r\n        return scratchModelMatrixAndBV;\r\n    }\r\n\r\n    var scratchPosition = new Cartesian3();\r\n\r\n    function createPrimitive(options, primitive, primitiveBatchIds, geometry, getModelMatrixAndBoundingVolume) {\r\n        if (!defined(primitive)) {\r\n            return;\r\n        }\r\n\r\n        var numberOfPrimitives = primitiveBatchIds.length;\r\n        var geometryPositions = geometry.attributes.position.values;\r\n        var geometryIndices = geometry.indices;\r\n\r\n        var positions = options.positions;\r\n        var vertexBatchIds = options.vertexBatchIds;\r\n        var indices = options.indices;\r\n\r\n        var batchIds = options.batchIds;\r\n        var batchTableColors = options.batchTableColors;\r\n        var batchedIndices = options.batchedIndices;\r\n        var indexOffsets = options.indexOffsets;\r\n        var indexCounts = options.indexCounts;\r\n        var boundingVolumes = options.boundingVolumes;\r\n\r\n        var modelMatrix = options.modelMatrix;\r\n        var center = options.center;\r\n\r\n        var positionOffset = options.positionOffset;\r\n        var batchIdIndex = options.batchIdIndex;\r\n        var indexOffset = options.indexOffset;\r\n        var batchedIndicesOffset = options.batchedIndicesOffset;\r\n\r\n        for (var i = 0; i < numberOfPrimitives; ++i) {\r\n            var primitiveModelMatrixAndBV = getModelMatrixAndBoundingVolume(primitive, i);\r\n            var primitiveModelMatrix = primitiveModelMatrixAndBV.modelMatrix;\r\n            Matrix4.multiply(modelMatrix, primitiveModelMatrix, primitiveModelMatrix);\r\n\r\n            var batchId = primitiveBatchIds[i];\r\n\r\n            var positionsLength = geometryPositions.length;\r\n            for (var j = 0; j < positionsLength; j += 3) {\r\n                var position = Cartesian3.unpack(geometryPositions, j, scratchPosition);\r\n                Matrix4.multiplyByPoint(primitiveModelMatrix, position, position);\r\n                Cartesian3.subtract(position, center, position);\r\n\r\n                Cartesian3.pack(position, positions, positionOffset * 3 + j);\r\n                vertexBatchIds[batchIdIndex++] = batchId;\r\n            }\r\n\r\n            var indicesLength = geometryIndices.length;\r\n            for (var k = 0; k < indicesLength; ++k) {\r\n                indices[indexOffset + k] = geometryIndices[k] + positionOffset;\r\n            }\r\n\r\n            var offset = i + batchedIndicesOffset;\r\n            batchedIndices[offset] = new Vector3DTileBatch({\r\n                offset : indexOffset,\r\n                count : indicesLength,\r\n                color : Color.fromRgba(batchTableColors[batchId]),\r\n                batchIds : [batchId]\r\n            });\r\n            batchIds[offset] = batchId;\r\n            indexOffsets[offset] = indexOffset;\r\n            indexCounts[offset] = indicesLength;\r\n            boundingVolumes[offset] = BoundingSphere.transform(primitiveModelMatrixAndBV.boundingVolume, primitiveModelMatrix);\r\n\r\n            positionOffset += positionsLength / 3;\r\n            indexOffset += indicesLength;\r\n        }\r\n\r\n        options.positionOffset = positionOffset;\r\n        options.batchIdIndex = batchIdIndex;\r\n        options.indexOffset = indexOffset;\r\n        options.batchedIndicesOffset += numberOfPrimitives;\r\n    }\r\n\r\n    var scratchCenter = new Cartesian3();\r\n    var scratchMatrix4 = new Matrix4();\r\n\r\n    function unpackBuffer(buffer) {\r\n        var packedBuffer = new Float64Array(buffer);\r\n\r\n        var offset = 0;\r\n        Cartesian3.unpack(packedBuffer, offset, scratchCenter);\r\n        offset += Cartesian3.packedLength;\r\n\r\n        Matrix4.unpack(packedBuffer, offset, scratchMatrix4);\r\n    }\r\n\r\n    function packedBatchedIndicesLength(batchedIndices) {\r\n        var length = batchedIndices.length;\r\n        var count = 0;\r\n        for (var i = 0; i < length; ++i) {\r\n            count += Color.packedLength + 3 + batchedIndices[i].batchIds.length;\r\n        }\r\n        return count;\r\n    }\r\n\r\n    function packBuffer(indicesBytesPerElement, batchedIndices, boundingVolumes) {\r\n        var numBVs = boundingVolumes.length;\r\n        var length = 1 + 1 + numBVs * BoundingSphere.packedLength + 1 + packedBatchedIndicesLength(batchedIndices);\r\n\r\n        var packedBuffer = new Float64Array(length);\r\n\r\n        var offset = 0;\r\n        packedBuffer[offset++] = indicesBytesPerElement;\r\n        packedBuffer[offset++] = numBVs;\r\n\r\n        for (var i = 0; i < numBVs; ++i) {\r\n            BoundingSphere.pack(boundingVolumes[i], packedBuffer, offset);\r\n            offset += BoundingSphere.packedLength;\r\n        }\r\n\r\n        var indicesLength = batchedIndices.length;\r\n        packedBuffer[offset++] = indicesLength;\r\n\r\n        for (var j = 0; j < indicesLength; ++j) {\r\n            var batchedIndex = batchedIndices[j];\r\n\r\n            Color.pack(batchedIndex.color, packedBuffer, offset);\r\n            offset += Color.packedLength;\r\n\r\n            packedBuffer[offset++] = batchedIndex.offset;\r\n            packedBuffer[offset++] = batchedIndex.count;\r\n\r\n            var batchIds = batchedIndex.batchIds;\r\n            var batchIdsLength = batchIds.length;\r\n            packedBuffer[offset++] = batchIdsLength;\r\n\r\n            for (var k = 0; k < batchIdsLength; ++k) {\r\n                packedBuffer[offset++] = batchIds[k];\r\n            }\r\n        }\r\n\r\n        return packedBuffer;\r\n    }\r\n\r\n    function createVectorTileGeometries(parameters, transferableObjects) {\r\n        var boxes = defined(parameters.boxes) ? new Float32Array(parameters.boxes) : undefined;\r\n        var boxBatchIds = defined(parameters.boxBatchIds) ? new Uint16Array(parameters.boxBatchIds) : undefined;\r\n        var cylinders =  defined(parameters.cylinders) ? new Float32Array(parameters.cylinders) : undefined;\r\n        var cylinderBatchIds = defined(parameters.cylinderBatchIds) ? new Uint16Array(parameters.cylinderBatchIds) : undefined;\r\n        var ellipsoids =  defined(parameters.ellipsoids) ? new Float32Array(parameters.ellipsoids) : undefined;\r\n        var ellipsoidBatchIds = defined(parameters.ellipsoidBatchIds) ? new Uint16Array(parameters.ellipsoidBatchIds) : undefined;\r\n        var spheres = defined(parameters.spheres) ?  new Float32Array(parameters.spheres) : undefined;\r\n        var sphereBatchIds = defined(parameters.sphereBatchIds) ? new Uint16Array(parameters.sphereBatchIds) : undefined;\r\n\r\n        var numberOfBoxes = defined(boxes) ? boxBatchIds.length : 0;\r\n        var numberOfCylinders = defined(cylinders) ? cylinderBatchIds.length : 0;\r\n        var numberOfEllipsoids = defined(ellipsoids) ? ellipsoidBatchIds.length : 0;\r\n        var numberOfSpheres = defined(spheres) ? sphereBatchIds.length : 0;\r\n\r\n        var boxGeometry = BoxGeometry.getUnitBox();\r\n        var cylinderGeometry = CylinderGeometry.getUnitCylinder();\r\n        var ellipsoidGeometry = EllipsoidGeometry.getUnitEllipsoid();\r\n\r\n        var boxPositions = boxGeometry.attributes.position.values;\r\n        var cylinderPositions = cylinderGeometry.attributes.position.values;\r\n        var ellipsoidPositions = ellipsoidGeometry.attributes.position.values;\r\n\r\n        var numberOfPositions = boxPositions.length * numberOfBoxes;\r\n        numberOfPositions += cylinderPositions.length * numberOfCylinders;\r\n        numberOfPositions += ellipsoidPositions.length * (numberOfEllipsoids + numberOfSpheres);\r\n\r\n        var boxIndices = boxGeometry.indices;\r\n        var cylinderIndices = cylinderGeometry.indices;\r\n        var ellipsoidIndices = ellipsoidGeometry.indices;\r\n\r\n        var numberOfIndices = boxIndices.length * numberOfBoxes;\r\n        numberOfIndices += cylinderIndices.length * numberOfCylinders;\r\n        numberOfIndices += ellipsoidIndices.length * (numberOfEllipsoids + numberOfSpheres);\r\n\r\n        var positions = new Float32Array(numberOfPositions);\r\n        var vertexBatchIds = new Uint16Array(numberOfPositions / 3);\r\n        var indices = IndexDatatype.createTypedArray(numberOfPositions / 3, numberOfIndices);\r\n\r\n        var numberOfGeometries = numberOfBoxes + numberOfCylinders + numberOfEllipsoids + numberOfSpheres;\r\n        var batchIds = new Uint16Array(numberOfGeometries);\r\n        var batchedIndices = new Array(numberOfGeometries);\r\n        var indexOffsets = new Uint32Array(numberOfGeometries);\r\n        var indexCounts = new Uint32Array(numberOfGeometries);\r\n        var boundingVolumes = new Array(numberOfGeometries);\r\n\r\n        unpackBuffer(parameters.packedBuffer);\r\n\r\n        var options = {\r\n            batchTableColors : new Uint32Array(parameters.batchTableColors),\r\n            positions : positions,\r\n            vertexBatchIds : vertexBatchIds,\r\n            indices : indices,\r\n            batchIds : batchIds,\r\n            batchedIndices : batchedIndices,\r\n            indexOffsets : indexOffsets,\r\n            indexCounts : indexCounts,\r\n            boundingVolumes : boundingVolumes,\r\n            positionOffset : 0,\r\n            batchIdIndex : 0,\r\n            indexOffset : 0,\r\n            batchedIndicesOffset : 0,\r\n            modelMatrix : scratchMatrix4,\r\n            center : scratchCenter\r\n        };\r\n\r\n        createPrimitive(options, boxes, boxBatchIds, boxGeometry, boxModelMatrixAndBoundingVolume);\r\n        createPrimitive(options, cylinders, cylinderBatchIds, cylinderGeometry, cylinderModelMatrixAndBoundingVolume);\r\n        createPrimitive(options, ellipsoids, ellipsoidBatchIds, ellipsoidGeometry, ellipsoidModelMatrixAndBoundingVolume);\r\n        createPrimitive(options, spheres, sphereBatchIds, ellipsoidGeometry, sphereModelMatrixAndBoundingVolume);\r\n\r\n        var packedBuffer = packBuffer(indices.BYTES_PER_ELEMENT, batchedIndices, boundingVolumes);\r\n        transferableObjects.push(positions.buffer, vertexBatchIds.buffer, indices.buffer);\r\n        transferableObjects.push(batchIds.buffer, indexOffsets.buffer, indexCounts.buffer);\r\n        transferableObjects.push(packedBuffer.buffer);\r\n\r\n        return {\r\n            positions : positions.buffer,\r\n            vertexBatchIds : vertexBatchIds.buffer,\r\n            indices : indices.buffer,\r\n            indexOffsets : indexOffsets.buffer,\r\n            indexCounts : indexCounts.buffer,\r\n            batchIds : batchIds.buffer,\r\n            packedBuffer : packedBuffer.buffer\r\n        };\r\n    }\r\nexport default createTaskProcessorWorker(createVectorTileGeometries);\r\n"],"names":["Cartesian3","Matrix4","BoundingSphere","defined","Color","BoxGeometry","CylinderGeometry","EllipsoidGeometry","IndexDatatype"],"mappings":"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"}