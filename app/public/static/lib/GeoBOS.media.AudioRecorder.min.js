/*! media.AudioRecorder v2.2.0 published at 2020-4-9 15:10:44 */
!function(e,r){"object"==typeof exports&&"object"==typeof module?module.exports=r():"function"==typeof define&&define.amd?define("media.AudioRecorder",[],r):"object"==typeof exports?exports["media.AudioRecorder"]=r():e["media.AudioRecorder"]=r()}(window,function(){return function(e){var r={};function n(o){if(r[o])return r[o].exports;var t=r[o]={i:o,l:!1,exports:{}};return e[o].call(t.exports,t,t.exports,n),t.l=!0,t.exports}return n.m=e,n.c=r,n.d=function(e,r,o){n.o(e,r)||Object.defineProperty(e,r,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,r){if(1&r&&(e=n(e)),8&r)return e;if(4&r&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&r&&"string"!=typeof e)for(var t in e)n.d(o,t,function(r){return e[r]}.bind(null,t));return o},n.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(r,"a",r),r},n.o=function(e,r){return Object.prototype.hasOwnProperty.call(e,r)},n.p="",n(n.s=0)}([function(e,r){!function(e){e.GeoBOS=e.GeoBOS||{},e.GeoBOS.media=e.GeoBOS.media||{},e.GeoBOS.media.AudioRecorder=function(){var e=null,r=function(){},n=function(){},o=function(){},t=function(){},u=function(){},i=null,c=!1,a=null,d=null,l=0,f=0;function s(n){r(new Error(n+"")),null!==e&&atelier.audiorecorder.release().then(function(){e=null,i=null,c=!1,a=null,d=null,l=0,f=0,atelier.audiorecorder.onRecordingListener.removeListener(s)}).catch(function(e){})}var p={record:function(){"ready"===e&&atelier.audiorecorder.start({audioSource:"MIC",outputFormat:"AAC_ADTS",audioEncoder:"AAC"}).then(function(r){""===r?(s("audio recorder start error"),i=null):(e="recording",n(),i=r,setTimeout(function(){c=!0},3e3))}).catch(function(e){s("start audio error:"+e.errorCode)})},pause:function(){function r(){clearInterval(d),d=null,f=0,atelier.audiorecorder.pause().then(function(){e="pause",o()}).catch(function(e){s("pause audio error:"+e.errorCode)})}"recording"===e&&(c?r():d||(d=setInterval(function(){(f++>3||c)&&r()},1e3)))},resume:function(){"pause"===e&&atelier.audiorecorder.resume().then(function(){e="recording",t()}).catch(function(e){s("resume audio error:"+e.errorCode)})},stop:function(){function r(){clearInterval(a),a=null,l=0,atelier.audiorecorder.stop().then(function(){u(i),atelier.audiorecorder.release().then(function(){e=null}).catch(function(e){s("release audio error:"+e.errorCode)})}).catch(function(e){s("stop audio error:"+e.errorCode)})}"recording"===e||"pause"===e?c?r():a||(a=setInterval(function(){(l++>3||c)&&r()},1e3)):"ready"===e&&atelier.audiorecorder.release().then(function(){e=null}).catch(function(e){s("release audio error:"+e.errorCode)})},on:function(e,i){switch(e){case"start":n=i;break;case"stop":u=i;break;case"pause":o=i;break;case"resume":t=i;break;case"error":r=i}}};return{getInstance:function(r){r=r||function(){},null===e?atelier.audiorecorder.create().then(function(){e="ready",atelier.audiorecorder.onRecordingListener.addListener(s),r(null,p)}).catch(function(e){r(new Error("create audio recorder failed:"+JSON.stringify(e)))}):r(null,p)},getVersion:function(e){return e&&e(null,"2.2.0")}}}(),e.GeoBOS.media.audioRecorder=e.GeoBOS.media.AudioRecorder}(window)}])});
//# sourceMappingURL=GeoBOS.media.AudioRecorder.min.js.map